
<app-delete> </app-delete>





<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-10">
                <h4 class="card-title"> {{ 'UPA.MasterAssets' | translate }} </h4>
            </div>
            <div class="col-2">
                <a (click)="addMasterAsset()" [ngClass]="lang == 'en' ? 'hrefbutton': 'hrefbuttonAr'">
                    {{'UPA.Add'|translate }}</a>
            </div>
           
        </div>
    </div>
  
    
    <div class="card-list">
        <div class="row ">
            <div class="col-12">
                <p-table #dt2 [value]="lstMasterAssets" [rows]="10" [totalRecords]="count" [lazy]="true"  [rowHover]="true"
                    [loading]="loading" (onLazyLoad)="clicktbl($event)" [paginator]="true" responsiveLayout="scroll"
                    styleClass="p-datatable-sm p-datatable-striped p-datatable-gridlines" [globalFilterFields]="['code','nameAr','originNameAr','brandNameAr','ecriNameAr','model']"  [scrollable]="true"  scrollHeight="380px">
                    <ng-template pTemplate="header" >
                        <tr>
                            <th [sortable]="true" >
                                <ng-multiselect-dropdown    appendTo="body" [placeholder]="'UPA.Code'|translate"
                                [settings]="dropdownSettingsCode" [data]="lstMasterAssets3" [(ngModel)]="selectedCodeItems"
                                (onSelect)="onCodeSelect($event)" (onSelectAll)="onCodeSelectAll($event)"
                                (onDeSelect)="onCodeDeselect($event)" (onDeSelectAll)="onCodeDeselectAll($event)">
                            </ng-multiselect-dropdown>
                            </th>
                            <th [sortable]="true"><ng-multiselect-dropdown    appendTo="body" [placeholder]="'UPA.Name'|translate"
                                [settings]="dropdownSettingsName" [data]="lstMasterAssets2" [(ngModel)]="selectedNameItems"
                                (onSelect)="onNameSelect($event)" (onSelectAll)="onNameSelectAll($event)"
                                (onDeSelect)="onNameDeselect($event)" (onDeSelectAll)="onNameDeselectAll($event)">
                            </ng-multiselect-dropdown></th>
                            <th [sortable]="true"> <ng-multiselect-dropdown appendTo="body" [placeholder]="'UPA.Periority'|translate" [settings]="dropdownSettings"
                                [data]="listAssetPeriority" [(ngModel)]="selectedOriginItems" (onSelect)="onPerioritySelect($event)"
                                (onSelectAll)="onPerioritySelectAll($event)" (onDeSelect)="onPeriorityDeselect($event)"
                                (onDeSelectAll)="onPeriorityDeselectAll($event)">
                            </ng-multiselect-dropdown></th>
                            <th [sortable]="true">          <ng-multiselect-dropdown appendTo="body" [placeholder]="'UPA.Brand'|translate" [settings]="dropdownSettings"
                                [data]="lstBrands" [(ngModel)]="selectedBrandItems" (onSelect)="onBrandSelect($event)"
                                (onSelectAll)="onBrandSelectAll($event)" (onDeSelect)="onBrandDeselect($event)"
                                (onDeSelectAll)="onBrandDeselectAll($event)">
                            </ng-multiselect-dropdown> </th>
                            <th  [sortable]="true"> <ng-multiselect-dropdown appendTo="body" [placeholder]="'UPA.ECRI'|translate" [settings]="dropdownSettings"
                                [data]="lstECRIName" [(ngModel)]="selectedECRIItems" (onSelect)="onECRISelect($event)"
                                (onSelectAll)="onECRISelectAll($event)" (onDeSelect)="onECRIDeselect($event)"
                                (onDeSelectAll)="onECRIDeselectAll($event)">
                            </ng-multiselect-dropdown> </th>
                            <th  [sortable]="true">    <ng-multiselect-dropdown    appendTo="body" [placeholder]="'UPA.Model'|translate"
                                [settings]="dropdownSettingsModel" [data]="lstMasterAssets4" [(ngModel)]="selectedModelItems"
                                (onSelect)="onModelSelect($event)" (onSelectAll)="onModelSelectAll($event)"
                                (onDeSelect)="onModelDeselect($event)" (onDeSelectAll)="onModelDeselectAll($event)">
                            </ng-multiselect-dropdown></th>
                            <th> <div>
                                <a class="btn resetIcon" (click)="  clearSearch()">
                                    <i class="fa-solid fa-x "></i></a>
                            </div></th>
                        </tr>
                        <tr>
                            <th [sortable]="true" >
                                {{ 'UPA.Code' | translate }}
                                <p-sortIcon id="{{'UPA.Code' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon>
                            </th>
                            <th [sortable]="true">{{ 'UPA.Name' | translate }}
                                <p-sortIcon id="{{'UPA.Name' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon></th>
                            <th [sortable]="true">{{'UPA.Periority' | translate}}
                                <p-sortIcon id="{{'UPA.Periority' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon></th>
                            <th [sortable]="true">{{'UPA.Brand' | translate}}
                                <p-sortIcon id="{{'UPA.Brand' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon> </th>
                            <th  [sortable]="true">{{'UPA.ECRI' |translate}}
                                <p-sortIcon id="{{'UPA.ECRI' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon> </th>
                            <th  [sortable]="true">{{'UPA.Model' |translate}}
                                <p-sortIcon id="{{'UPA.Model' | translate}}" (click)="sortAfterSearch($event)"
                                style="cursor: pointer;"> </p-sortIcon></th>
                            <th>{{'UPA.Actions' | translate}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item>
                        <tr>
                            <td>{{lang=="en"?item.code:(+item.code).toLocaleString("ar-SA")}}</td>
                            <td>{{lang =="en" ? item.name:item.nameAr}}</td>
                            <td>{{lang =="en" ? item.assetPeriorityName:item.assetPeriorityNameAr}}</td>
                            <td>{{lang =="en" ? item.brandName:item.brandNameAr}}</td>
                            <td>{{lang =="en" ? item.ecriName:item.ecriNameAr}}</td>
                            <td>{{item.model}}</td>
                            <td>
                                <span (click)="viewMasterAsset(item.id)" pTooltip="{{'UPA.View' | translate}}" tooltipPosition="top">
                                    <i class="viewIcon pi pi-eye"></i> </span>
                                <span (click)="editMasterAsset(item.id)" pTooltip="{{'UPA.Edit' | translate}}" tooltipPosition="top">
                                    <i class="editIcon pi pi-file-edit"></i> </span>
                                    <span (click)="deleteMasterAsset(item.id)" pTooltip="{{'UPA.Delete' | translate}}" tooltipPosition="top">
                                        <i class="deleteIcon pi pi-trash"></i> </span>
                                    </td>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="7">{{ 'UPA.NoData' | translate }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>
<p-dialog appendTo="body" modal="true" [(visible)]="errorDisplay" [style]="{ width: '350px' }">
    <p-header style="color: rgb(181, 4, 4)"> {{ 'UPA.Error' | translate }} </p-header>
    <span style="color: rgb(181, 4, 4); font-weight: bold">
        {{ errorMessage }}</span>
</p-dialog>